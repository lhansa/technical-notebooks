{
  "hash": "1a7d0f393b129f4d751dcf443f8b9070",
  "result": {
    "markdown": "---\ntitle: \"Muestreo (I)\"\ndescription: \"Un repaso a algunos conceptos introductorios al muestreo estad칤stico\"\ndescription-meta: \"Explicaci칩n de conceptos sobre muestreo (sampling) estad칤stico\"\nauthor: \"Leonardo Hansa\"\ndate: \"2023-07-18\"\ncategories: [datos]\nexecute: \n  echo: false\nfreeze: auto\n---\n\n\nVi en Twitter esto: \n\n<blockquote class=\"twitter-tweet\"><p lang=\"es\" dir=\"ltr\">Las encuestas lo han dejado claro.<br>Saben lo que vas a votar.<br>Han decidido que el <a href=\"https://twitter.com/hashtag/23J?src=hash&amp;ref_src=twsrc%5Etfw\">#23J</a> PP y Vox gobernar치n este pa칤s.<br>쯈uito importancia a sus estimaciones?<br>No, porque generalizan la opini칩n de que no hay nada que hacer.<br>Pero no es cierto. <br>No hay nada escrito.<br>Si votamos, ganamos <a href=\"https://t.co/LUFoLm3WHT\">pic.twitter.com/LUFoLm3WHT</a></p>&mdash; Carlos S치nchez Mato游댵九勇 (@carlossmato) <a href=\"https://twitter.com/carlossmato/status/1681041667573334019?ref_src=twsrc%5Etfw\">July 17, 2023</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n쮼s in칰til el muestreo? \n\nSi lo haces mal, s칤. Como todo. \n\nRepaso algunos conceptos relacionados con el muestreo, sacados principalmente del curso de _Sampling with R_ de Datacamp. \n\n## De qu칠 sirve el muestreo\n\nAntes de las elecciones se hacen encuestas sobre intenci칩n de voto. 쯈u칠 se te viene a la mente con estas encuestas?\n\nPues que nunca te preguntan a ti. \n\n(S칤, ya, justo quiz치 a ti s칤, una vez... pero no suele ocurrir. Lo normal es que nunca te hayan preguntado). \n\nA la mayor칤a de las personas no les preguntan nada. \n\nPero un muestreo adecuado puede hacer que eso tenga valor. \n\nEs m치s, **un muestreo puede ser tu 칰nica opci칩n para estudiar unos datos.**\n\n- En un caso como el de las encuestas, no tienen recursos para encuestar a todos los votantes de un pa칤s como, pongamos, Espa침a ([unos 37 millones de personas](https://www.boe.es/boe/dias/2019/12/02/pdfs/BOE-A-2019-17344.pdf))\n- En un an치lisis de sangre, no estudian todos los litros de sangre de tu cuerpo: te sacan una muestra y generalizan (sacarte toda la sangre es peligroso: no lo intentes). \n- Si tienes una base de datos con millones de clientes, alg칰n algoritmo de _machine learning_ puede suponer mucha carga de trabajo para tu ordenador (no todos tenemos presupuesto para contratar servidores enormes en Amazon). )\n\n쯊iene sentido siempre el muestreo? No. Si est치s corrigiendo unos ex치menes de unos alumnos, no tiene sentido que corrijas un porcentaje y extrapoles los dem치s por ahorrarte el tiempo. \n\n## Muestreo aleatorio sistem치tico\n\nSi has estudiado algo de estad칤stica, te habr치s topado con el muestreo aleatorio. Consiste en seleccionar las observaciones para una muestra sin ning칰n criterio en concreto: esta s칤, esta no, esta s칤, esta tambi칠n porque s칤, esta no, esta tampoco...\n\nMe gusta un [conjunto de datos con m칠tricas de ping칲inos](https://allisonhorst.github.io/palmerpenguins/) disponible en cualquier software estad칤stico que se precie. \n\n\n\n::: {.cell}\n::: {.cell-output-display}\n|species |island    | bill_length_mm| bill_depth_mm| flipper_length_mm| body_mass_g|sex    | year|\n|:-------|:---------|--------------:|-------------:|-----------------:|-----------:|:------|----:|\n|Adelie  |Torgersen |           39.1|          18.7|               181|        3750|male   | 2007|\n|Adelie  |Torgersen |           39.5|          17.4|               186|        3800|female | 2007|\n|Adelie  |Torgersen |           40.3|          18.0|               195|        3250|female | 2007|\n|Adelie  |Torgersen |             NA|            NA|                NA|          NA|NA     | 2007|\n|Adelie  |Torgersen |           36.7|          19.3|               193|        3450|female | 2007|\n|Adelie  |Torgersen |           39.3|          20.6|               190|        3650|male   | 2007|\n:::\n:::\n\n\nUna de las m칠tricas que tiene es la longitud del pico, en mil칤metros. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/histograma1-1.png){width=672}\n:::\n:::\n\n\n쮺칩mo cambia eso si lo dibujas sobre una muestra aleatoria de los ping칲inos?\n\nLo primero es elegir la muestra aleatoria. Sup칩n que etiquetas a cada uno como 1, 2, 3... as칤 hasta 344, que son todos los ping칲inos que tienes. \n\nEn el siguiente gr치fico tienes coloreados en azul los ping칲inos que eliges para tu muestra (50). \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n쮺칩mo cambia la distribuci칩n de la longitud del pico en esta muestra? \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/hist2-1.png){width=672}\n:::\n:::\n\n\nHemos perdido valores extremos pero se mantiene una forma parecida. \n\nUn tipo diferente de muestreo es el sistem치tico, que consiste en hacer una selecci칩n basada en un criterio con respecto a la posici칩n de la observaci칩n en el conjunto de datos. En el siguiente gr치fico, pinto en azul al ping칲ino 1, 7, 13, etc... o sea, selecciono al primer ping칲ino de cada 6. \n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/samplesist-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/hist3-1.png){width=672}\n:::\n:::\n\n\nAparte del caso extremo, la distribuci칩n no ha cambiado mucho, en parte porque la distribuci칩n de las observaciones no sigue ning칰n orden en concreto. Si tu tabla de datos sigue un orden, deber치s valorar si ese orden afecta al sistema que eliges para muestrear tus datos. \n\n\n## Muestreo estratificado\n\nEn el conjunto de datos tenemos tres especies de ping칲inos. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nAlgo habitual en _machine learning_ forzar a mantener esa proporci칩n diferente de especies en la muestra elegida, para que el conjunto de datos de trabajo mantenga esa distribuci칩n original. \n\n쯇ero qu칠 pasa si no quieres que as칤 sea? \n\nImagina que est치s estudiando si una medicaci칩n es efectiva o no. Si mantienes la proporci칩n original, puede ser que de la especie menos representada (Chinstrap) te quedes casi sin muestra. \n\nEso te puede venir mal, porque t칰 necesitas que haya muestra de todas las especies, para saber si en una especie el medicamento es m치s o menos efectivo. \n\nEn un caso as칤, no querr칤as un muestreo estratificado, sino que forzar칤as incluso a que en la muestra, todos los grupos estuvieran igualmente representados. \n\n## C칩mo afecta el tama침o de la muestra\n\nCuando tienes a mano la poblaci칩n total, puedes comparar los c치lculos que hagas en tu muestra con los de la poblaci칩n (para cuando no tengas la poblaci칩n, te hablar칠 de esto en unos d칤as). \n\nEn el caso de los ping칲inos, puedo calcular la media de la longitud del pico para la poblaci칩n: 43.9219298. \n\nO tambi칠n para la muestra que calcul칠 antes: \n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 칑 1\n  media_muestral\n           <dbl>\n1           44.6\n```\n:::\n:::\n\n\n쯉on muy distintas?\n\nUna medida de esta diferencia es el error relativo: \n\n$$\\frac{|media_{pop} - media_{sample}|}{media_{pop}}$$\n\n\n쮺u치l es la gracia? \n\nPues que si tu tama침o muestral es muy peque침o, no hay ninguna garant칤a de que la media (o lo que est칠s midiendo) se parezca a la poblacional:\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 칑 1\n  media_muestral\n           <dbl>\n1           45.8\n```\n:::\n:::\n\n\nPero si dejas que el tama침o muestral crezca, tu c치lculo se estabilizar치. \n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/evol-sample-error2-1.png){width=672}\n:::\n:::\n\n\n\n[En unos d칤as](https://longitudsinanchura.com/posts/2023-07-21-muestreo-ii) te escribo sobre c칩mo aproximar esto cuando no tienes acceso a la media poblacional, pero que puedas valorar si tu muestra es adecuada o no.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}