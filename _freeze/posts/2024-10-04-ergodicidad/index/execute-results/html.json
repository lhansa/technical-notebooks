{
  "hash": "8b02694505108606e15472ad4495e5dc",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Procesos ergódicos\"\ndescription: \"Pequeña práctica y ejemplo con procesos ergódicos en Python\"\ndescription-meta: \"Pequeña práctica y ejemplo con procesos ergódicos en Python\"\nauthor: \"Leonardo Hansa\"\ndate: \"2024-10-04\"\ncategories: [exploraciones]\nexecute: \n  echo: true\n  message: false\n  warning: false\nfreeze: true\n---\n\n\n[Leo a Gil Bellosta] sobre ergocidad y he querido plantear lo que comenta. \n\nEl define la ergodicidad mucho mejor de lo que lo podría hacer yo, salvo que lo copiara. Pero para copiarlo, mejor ve a su web. \n\nPlanteo aquí el código de su ejemplo. \n\n::: {#libs .cell execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\n```\n:::\n\n\n## Lanzamiento de una moneda\n\n::: {#params .cell execution_count=2}\n``` {.python .cell-code}\nn_individuos = 100\nn_veces = 1000\n```\n:::\n\n\nTienes a `py n_individuos` que lanzan una moneda al aire `py n_veces` cada uno. Eso hace un total de `py n_individuos * n_veces` lanzamientos, en los que la probablidad teórica de obtener cara (resultado igual a 1 en este caso) es $0,5$.\n\n::: {#cell-sim-lanzamientos .cell execution_count=3}\n``` {.python .cell-code}\nnp.random.seed(10)\nlanzamientos = np.random.randint(0, 2, size=n_individuos * n_veces)\nlanzamientos = lanzamientos.reshape(n_individuos, n_veces)\nlanzamientos.shape\n```\n\n::: {#sim-lanzamientos .cell-output .cell-output-display execution_count=3}\n```\n(100, 1000)\n```\n:::\n:::\n\n\nEste es un proceso estocástico ergódico porque: \n\n- Para cualquier individuo $i$, la probabilidad de obtener cara en todos sus lanzamientos es 0,5, y\n- para cualquier lanzamiento $k$, la probabilidad de obtener cara entre los $k$-ésimos lanzamientos de todos los individuos es $0,5$.\n\n\nPor ejemplo, la probabilidad de obtener cara para el individuo 2 (el tercero, porque esto es Python y piensan raro) es:\n\n::: {#cell-individuo2 .cell execution_count=4}\n``` {.python .cell-code}\nnp.mean(lanzamientos[2, :])\n```\n\n::: {#individuo2 .cell-output .cell-output-display execution_count=4}\n```\n0.494\n```\n:::\n:::\n\n\nA su vez, la probabilidad de que obtengan cara entre todos los individuos en el lanzamiento 50 (el 51 xD) es:\n\n::: {#cell-lanzamiento50 .cell execution_count=5}\n``` {.python .cell-code}\nnp.mean(lanzamientos[:, 50])\n```\n\n::: {#lanzamiento50 .cell-output .cell-output-display execution_count=5}\n```\n0.53\n```\n:::\n:::\n\n\n## Ejemplo de proceso no ergódico\n\nSupón ahora este proceso: \n\n1. Partes de un capital de 1. \n2. Tiras una moneda al aire. \n3. Si sale cara, multiplicas el capital por 1,5; si sale cruz, por 0,6\n4. Ve al paso 2.\n\n\nLa simulación de lanzamientos de monedas con sus resultados $1,5$ y $0,6$ se puede hacer así:\n\n::: {#multiplicadores .cell execution_count=6}\n``` {.python .cell-code}\nmultiplicadores_capital = np.random.choice([0.6, 1.5], size=n_individuos * n_veces)\nmultiplicadores_capital = multiplicadores_capital.reshape(n_individuos, n_veces)\n```\n:::\n\n\nY la evolución del capital se calcula así:\n\n::: {#capital-evolution .cell execution_count=7}\n``` {.python .cell-code}\ncapitales = multiplicadores_capital.cumprod(axis=1)\n```\n:::\n\n\nEl capital de cada individuo (`py n_individuos`) empezaba en 1, por lo que el capital medio por individuo era de 1. Tras el primer lanzamiento, el capital medio queda en: \n\n::: {#cell-capital1 .cell execution_count=8}\n``` {.python .cell-code}\ncapitales[:, 0].mean()\n```\n\n::: {#capital1 .cell-output .cell-output-display execution_count=8}\n```\n1.0499999999999998\n```\n:::\n:::\n\n\nTen en cuenta que la media teórica sería $\\frac{1,50 + 0,60}{2} = 1,05$.\n\nLa evolución de capitales medios: \n\n::: {#cell-capital-societario .cell execution_count=9}\n``` {.python .cell-code}\n# compute mean per column on numpy array capitales\nevolucion_capital_medio = capitales.mean(axis=0)\nimport matplotlib.pyplot as plt\nplt.plot(evolucion_capital_medio)\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/capital-societario-output-1.png){#capital-societario width=566 height=411}\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}