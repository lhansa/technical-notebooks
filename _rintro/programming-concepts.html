<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Programming concepts | Introduction to R</title>
  <meta name="description" content="R contents and material for classes. Excel users may be the target." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Programming concepts | Introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R contents and material for classes. Excel users may be the target." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Programming concepts | Introduction to R" />
  
  <meta name="twitter:description" content="R contents and material for classes. Excel users may be the target." />
  

<meta name="author" content="Leonardo Hansa" />


<meta name="date" content="2021-04-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-visualization.html"/>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="first-steps.html"><a href="first-steps.html"><i class="fa fa-check"></i><b>1</b> First steps</a>
<ul>
<li class="chapter" data-level="1.1" data-path="first-steps.html"><a href="first-steps.html#programming-in-r"><i class="fa fa-check"></i><b>1.1</b> Programming in R</a></li>
<li class="chapter" data-level="1.2" data-path="first-steps.html"><a href="first-steps.html#r-as-a-calculator"><i class="fa fa-check"></i><b>1.2</b> R as a calculator</a></li>
<li class="chapter" data-level="1.3" data-path="first-steps.html"><a href="first-steps.html#simple-types-of-objects"><i class="fa fa-check"></i><b>1.3</b> Simple types of objects</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="first-steps.html"><a href="first-steps.html#numeric"><i class="fa fa-check"></i><b>1.3.1</b> Numeric</a></li>
<li class="chapter" data-level="1.3.2" data-path="first-steps.html"><a href="first-steps.html#character"><i class="fa fa-check"></i><b>1.3.2</b> Character</a></li>
<li class="chapter" data-level="1.3.3" data-path="first-steps.html"><a href="first-steps.html#logical"><i class="fa fa-check"></i><b>1.3.3</b> Logical</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="first-steps.html"><a href="first-steps.html#sets-of-elements"><i class="fa fa-check"></i><b>1.4</b> Sets of elements</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="first-steps.html"><a href="first-steps.html#vectors"><i class="fa fa-check"></i><b>1.4.1</b> Vectors</a></li>
<li class="chapter" data-level="1.4.2" data-path="first-steps.html"><a href="first-steps.html#matrix"><i class="fa fa-check"></i><b>1.4.2</b> Matrix</a></li>
<li class="chapter" data-level="1.4.3" data-path="first-steps.html"><a href="first-steps.html#data-frames"><i class="fa fa-check"></i><b>1.4.3</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="first-steps.html"><a href="first-steps.html#extending-r-with-libraries"><i class="fa fa-check"></i><b>1.5</b> Extending R with libraries</a></li>
<li class="chapter" data-level="1.6" data-path="first-steps.html"><a href="first-steps.html#installation"><i class="fa fa-check"></i><b>1.6</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html"><i class="fa fa-check"></i><b>2</b> Reading data with readr</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#excel"><i class="fa fa-check"></i><b>2.1</b> Excel</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#about-the-names"><i class="fa fa-check"></i><b>2.1.1</b> About the names</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#what-is-a-csv-file"><i class="fa fa-check"></i><b>2.2</b> What is a csv file</a></li>
<li class="chapter" data-level="2.3" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#reading-a-csv"><i class="fa fa-check"></i><b>2.3</b> Reading a csv</a></li>
<li class="chapter" data-level="2.4" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#reading-other-tabular-data"><i class="fa fa-check"></i><b>2.4</b> Reading other tabular data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#another-csv"><i class="fa fa-check"></i><b>2.4.1</b> Another csv</a></li>
<li class="chapter" data-level="2.4.2" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#tsv"><i class="fa fa-check"></i><b>2.4.2</b> tsv</a></li>
<li class="chapter" data-level="2.4.3" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#release-your-imagination"><i class="fa fa-check"></i><b>2.4.3</b> Release your imagination</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="reading-data-with-readr.html"><a href="reading-data-with-readr.html#more-things"><i class="fa fa-check"></i><b>2.5</b> More things</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-tables.html"><a href="working-with-tables.html"><i class="fa fa-check"></i><b>3</b> Working with tables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-tables.html"><a href="working-with-tables.html#creating-and-selecting-columns"><i class="fa fa-check"></i><b>3.1</b> Creating and selecting columns</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="working-with-tables.html"><a href="working-with-tables.html#mtcars-dataset"><i class="fa fa-check"></i><b>3.1.1</b> mtcars dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="working-with-tables.html"><a href="working-with-tables.html#invented-dataset"><i class="fa fa-check"></i><b>3.1.2</b> Invented dataset</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="working-with-tables.html"><a href="working-with-tables.html#filtering-rows"><i class="fa fa-check"></i><b>3.2</b> Filtering rows</a></li>
<li class="chapter" data-level="3.3" data-path="working-with-tables.html"><a href="working-with-tables.html#distinct"><i class="fa fa-check"></i><b>3.3</b> Distinct</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="working-with-tables.html"><a href="working-with-tables.html#r-base"><i class="fa fa-check"></i><b>3.3.1</b> R base</a></li>
<li class="chapter" data-level="3.3.2" data-path="working-with-tables.html"><a href="working-with-tables.html#dplyr"><i class="fa fa-check"></i><b>3.3.2</b> dplyr</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="working-with-tables.html"><a href="working-with-tables.html#some-comments-about-na"><i class="fa fa-check"></i><b>3.4</b> Some comments about <code>NA</code></a></li>
<li class="chapter" data-level="3.5" data-path="working-with-tables.html"><a href="working-with-tables.html#row-numbers"><i class="fa fa-check"></i><b>3.5</b> Row numbers</a></li>
<li class="chapter" data-level="3.6" data-path="working-with-tables.html"><a href="working-with-tables.html#exercises"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
<li class="chapter" data-level="3.7" data-path="working-with-tables.html"><a href="working-with-tables.html#summarizing-tables"><i class="fa fa-check"></i><b>3.7</b> Summarizing tables</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="working-with-tables.html"><a href="working-with-tables.html#exercises-1"><i class="fa fa-check"></i><b>3.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="working-with-tables.html"><a href="working-with-tables.html#aggregating-the-data"><i class="fa fa-check"></i><b>3.8</b> Aggregating the data</a></li>
<li class="chapter" data-level="3.9" data-path="working-with-tables.html"><a href="working-with-tables.html#a-summary"><i class="fa fa-check"></i><b>3.9</b> A summary</a></li>
<li class="chapter" data-level="3.10" data-path="working-with-tables.html"><a href="working-with-tables.html#dplyr-verbs"><i class="fa fa-check"></i><b>3.10</b> Dplyr verbs</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="working-with-tables.html"><a href="working-with-tables.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>3.10.1</b> Filter rows with filter()</a></li>
<li class="chapter" data-level="3.10.2" data-path="working-with-tables.html"><a href="working-with-tables.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>3.10.2</b> Arrange rows with <code>arrange()</code></a></li>
<li class="chapter" data-level="3.10.3" data-path="working-with-tables.html"><a href="working-with-tables.html#select-columns-with-select"><i class="fa fa-check"></i><b>3.10.3</b> Select columns with <code>select()</code></a></li>
<li class="chapter" data-level="3.10.4" data-path="working-with-tables.html"><a href="working-with-tables.html#add-new-columns-with-mutate"><i class="fa fa-check"></i><b>3.10.4</b> Add new columns with <code>mutate()</code></a></li>
<li class="chapter" data-level="3.10.5" data-path="working-with-tables.html"><a href="working-with-tables.html#summarise-values-with-summarise"><i class="fa fa-check"></i><b>3.10.5</b> Summarise values with <code>summarise()</code></a></li>
<li class="chapter" data-level="3.10.6" data-path="working-with-tables.html"><a href="working-with-tables.html#randomly-sample-rows-with-sample_n-and-sample_frac"><i class="fa fa-check"></i><b>3.10.6</b> Randomly sample rows with <code>sample_n()</code> and <code>sample_frac()</code></a></li>
<li class="chapter" data-level="3.10.7" data-path="working-with-tables.html"><a href="working-with-tables.html#commonalities"><i class="fa fa-check"></i><b>3.10.7</b> Commonalities</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="working-with-tables.html"><a href="working-with-tables.html#grouped-operations"><i class="fa fa-check"></i><b>3.11</b> Grouped operations</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> Data visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#first-steps-into-dataviz"><i class="fa fa-check"></i><b>4.1</b> First steps into dataviz</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.1.1</b> ggplot2</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-visualization.html"><a href="data-visualization.html#scatter-plot"><i class="fa fa-check"></i><b>4.1.2</b> Scatter plot</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-visualization.html"><a href="data-visualization.html#columns"><i class="fa fa-check"></i><b>4.1.3</b> Columns</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-visualization.html"><a href="data-visualization.html#lines"><i class="fa fa-check"></i><b>4.1.4</b> Lines</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-visualization.html"><a href="data-visualization.html#exercises-about-scatter-plots"><i class="fa fa-check"></i><b>4.2</b> Exercises about scatter plots</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualization.html"><a href="data-visualization.html#exercise-1"><i class="fa fa-check"></i><b>4.2.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualization.html"><a href="data-visualization.html#exercise-2"><i class="fa fa-check"></i><b>4.2.2</b> Exercise 2</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualization.html"><a href="data-visualization.html#exercise-3"><i class="fa fa-check"></i><b>4.2.3</b> Exercise 3</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualization.html"><a href="data-visualization.html#exercise-4"><i class="fa fa-check"></i><b>4.2.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#exercises-about-line-plots"><i class="fa fa-check"></i><b>4.3</b> Exercises about line plots</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-visualization.html"><a href="data-visualization.html#exercise-1-1"><i class="fa fa-check"></i><b>4.3.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization.html"><a href="data-visualization.html#exercise-2-1"><i class="fa fa-check"></i><b>4.3.2</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#columns-and-boxplots"><i class="fa fa-check"></i><b>4.4</b> Columns and boxplots</a></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#preparing-the-data"><i class="fa fa-check"></i><b>4.5</b> Preparing the data</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#bar-plots"><i class="fa fa-check"></i><b>4.6</b> Bar plots</a></li>
<li class="chapter" data-level="4.7" data-path="data-visualization.html"><a href="data-visualization.html#histograms"><i class="fa fa-check"></i><b>4.7</b> Histograms</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization.html"><a href="data-visualization.html#boxplots"><i class="fa fa-check"></i><b>4.8</b> Boxplots</a></li>
<li class="chapter" data-level="4.9" data-path="data-visualization.html"><a href="data-visualization.html#some-improvements"><i class="fa fa-check"></i><b>4.9</b> Some improvements</a></li>
<li class="chapter" data-level="4.10" data-path="data-visualization.html"><a href="data-visualization.html#mixing-data"><i class="fa fa-check"></i><b>4.10</b> Mixing data</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="data-visualization.html"><a href="data-visualization.html#exercise"><i class="fa fa-check"></i><b>4.10.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="data-visualization.html"><a href="data-visualization.html#facets-the-basics"><i class="fa fa-check"></i><b>4.11</b> Facets: The basics</a></li>
<li class="chapter" data-level="4.12" data-path="data-visualization.html"><a href="data-visualization.html#many-variables-in-just-one-plot"><i class="fa fa-check"></i><b>4.12</b> Many variables in just one plot</a></li>
<li class="chapter" data-level="4.13" data-path="data-visualization.html"><a href="data-visualization.html#something-more"><i class="fa fa-check"></i><b>4.13</b> Something more</a>
<ul>
<li class="chapter" data-level="4.13.1" data-path="data-visualization.html"><a href="data-visualization.html#pivoting-data"><i class="fa fa-check"></i><b>4.13.1</b> Pivoting data</a></li>
<li class="chapter" data-level="4.13.2" data-path="data-visualization.html"><a href="data-visualization.html#basic-scatter-plot"><i class="fa fa-check"></i><b>4.13.2</b> Basic scatter plot</a></li>
<li class="chapter" data-level="4.13.3" data-path="data-visualization.html"><a href="data-visualization.html#facet-rows-accoding-to-vore"><i class="fa fa-check"></i><b>4.13.3</b> Facet rows accoding to vore</a></li>
<li class="chapter" data-level="4.13.4" data-path="data-visualization.html"><a href="data-visualization.html#specify-scale-and-space-arguments-to-free-up-rows"><i class="fa fa-check"></i><b>4.13.4</b> Specify scale and space arguments to free up rows</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="data-visualization.html"><a href="data-visualization.html#united-nations-life-expectancy-data"><i class="fa fa-check"></i><b>4.14</b> United Nations life expectancy data</a></li>
<li class="chapter" data-level="4.15" data-path="data-visualization.html"><a href="data-visualization.html#life-expectancy-of-men-vs.-women-by-country"><i class="fa fa-check"></i><b>4.15</b> Life expectancy of men vs. women by country</a></li>
<li class="chapter" data-level="4.16" data-path="data-visualization.html"><a href="data-visualization.html#visualize-i"><i class="fa fa-check"></i><b>4.16</b> Visualize (I)</a></li>
<li class="chapter" data-level="4.17" data-path="data-visualization.html"><a href="data-visualization.html#reference-lines-i"><i class="fa fa-check"></i><b>4.17</b> Reference lines (I)</a></li>
<li class="chapter" data-level="4.18" data-path="data-visualization.html"><a href="data-visualization.html#plot-titles-and-axis-labels"><i class="fa fa-check"></i><b>4.18</b> Plot titles and axis labels</a></li>
<li class="chapter" data-level="4.19" data-path="data-visualization.html"><a href="data-visualization.html#highlighting-remarkable-countries-i"><i class="fa fa-check"></i><b>4.19</b> Highlighting remarkable countries (I)</a></li>
<li class="chapter" data-level="4.20" data-path="data-visualization.html"><a href="data-visualization.html#gif"><i class="fa fa-check"></i><b>4.20</b> GIF</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="programming-concepts.html"><a href="programming-concepts.html"><i class="fa fa-check"></i><b>5</b> Programming concepts</a>
<ul>
<li class="chapter" data-level="5.1" data-path="programming-concepts.html"><a href="programming-concepts.html#purpose-of-functions"><i class="fa fa-check"></i><b>5.1</b> Purpose of functions</a></li>
<li class="chapter" data-level="5.2" data-path="programming-concepts.html"><a href="programming-concepts.html#the-arguments"><i class="fa fa-check"></i><b>5.2</b> The arguments</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="programming-concepts.html"><a href="programming-concepts.html#order-of-the-arguments"><i class="fa fa-check"></i><b>5.2.1</b> Order of the arguments</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="programming-concepts.html"><a href="programming-concepts.html#the-value"><i class="fa fa-check"></i><b>5.3</b> The value</a></li>
<li class="chapter" data-level="5.4" data-path="programming-concepts.html"><a href="programming-concepts.html#your-own-functions"><i class="fa fa-check"></i><b>5.4</b> Your own functions</a></li>
<li class="chapter" data-level="5.5" data-path="programming-concepts.html"><a href="programming-concepts.html#exercises-2"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
<li class="chapter" data-level="5.6" data-path="programming-concepts.html"><a href="programming-concepts.html#conditions"><i class="fa fa-check"></i><b>5.6</b> Conditions</a></li>
<li class="chapter" data-level="5.7" data-path="programming-concepts.html"><a href="programming-concepts.html#joining-data-frames-with-dplyr"><i class="fa fa-check"></i><b>5.7</b> Joining data frames with dplyr</a></li>
<li class="chapter" data-level="5.8" data-path="programming-concepts.html"><a href="programming-concepts.html#binding-data-frames"><i class="fa fa-check"></i><b>5.8</b> Binding data frames</a></li>
<li class="chapter" data-level="5.9" data-path="programming-concepts.html"><a href="programming-concepts.html#exercises-3"><i class="fa fa-check"></i><b>5.9</b> Exercises</a></li>
<li class="chapter" data-level="5.10" data-path="programming-concepts.html"><a href="programming-concepts.html#applying-the-same-function-to-several-elements-i"><i class="fa fa-check"></i><b>5.10</b> Applying the same function to several elements (I)</a></li>
<li class="chapter" data-level="5.11" data-path="programming-concepts.html"><a href="programming-concepts.html#lists"><i class="fa fa-check"></i><b>5.11</b> Lists</a></li>
<li class="chapter" data-level="5.12" data-path="programming-concepts.html"><a href="programming-concepts.html#applying-the-same-function-to-several-elements-ii"><i class="fa fa-check"></i><b>5.12</b> Applying the same function to several elements (II)</a></li>
<li class="chapter" data-level="5.13" data-path="programming-concepts.html"><a href="programming-concepts.html#exercise-5"><i class="fa fa-check"></i><b>5.13</b> Exercise</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming-concepts" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Programming concepts</h1>
<div id="purpose-of-functions" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Purpose of functions</h2>
<p>Simulating random data consists on generating a sample of numbers that seems random (this sounds vague but there are statistical ways of quantifying this similarity). For doing this, you need an algorithm that from a seed (a beginning number) will make several calculations that will return a new number. This new number is used for calculating the next. You can force that these generated numbers will have a gaussian distribution, or uniform, or be binary (as if they were heads and tails), whatever you need.</p>
<p>You may know some algorithms that perform this, but coding it is tedious. In R (or any statistical tool) you can easily generate such a sequence with just a tiny piece of code. You just need a function.</p>
<p>Imagine you want to randomly simulate some numbers with a gaussian distribution. You could study the algorithm and coding it, and execute that code whenever you need a new simulation, or you can use the <code>rnorm()</code> function.</p>
<p>A function is a piece of code with a name (<em>rnorm</em> in this case) that will execute the code that it represents (behind <code>rnorm()</code> that generator algorithm is written).</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="programming-concepts.html#cb547-1"></a>x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1000</span>)</span>
<span id="cb547-2"><a href="programming-concepts.html#cb547-2"></a><span class="kw">head</span>(x)</span></code></pre></div>
<pre><code>## [1] -1.5987095  1.0220178 -0.5928370 -0.5387604 -1.6497944  0.2080619</code></pre>
<p><code>head()</code> is also a function. You already know it. It shows the first six elements of what it receives.</p>
<p>We can now have a look at the entire generated vector to confirm it is gaussian, maybe with a plot. For intance, a histogram</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="programming-concepts.html#cb549-1"></a><span class="kw">hist</span>(x)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-283-1.png" width="672" /></p>
<p>The <code>hist()</code> function receives a vector and plots its histogram. Can you imagine having to plot manually a histogram like this every time a new vector is generated? Fortunately, with just one word you can get it done.</p>
</div>
<div id="the-arguments" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> The arguments</h2>
<p>We are going to work with randomly generated data. This is a bit tricky. A computer needs always a formula to do something, therefore nothing is random. Random data seems random according to some statistics but it is deterministic. This means that you can always replicate the generation of the <em>random</em> data. For doing this, take into account that this generation begins from a number, called seed. If you use the same seed I use, the data should be the same.</p>
<p>This is how to set it up.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="programming-concepts.html#cb550-1"></a><span class="kw">set.seed</span>(<span class="dv">31818</span>)</span></code></pre></div>
<p>So now we generate a vector of random numbers. They have a normal distribution (we will not get into probability theory during this course).</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="programming-concepts.html#cb551-1"></a>algunos_numeros &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb551-2"><a href="programming-concepts.html#cb551-2"></a></span>
<span id="cb551-3"><a href="programming-concepts.html#cb551-3"></a>algunos_numeros</span></code></pre></div>
<pre><code>##  [1] -0.3584224 -0.3227992  0.7659481 -1.5462213  0.3149461  0.6487038
##  [7] -0.9278019 -1.7762911  0.6025721  0.3918201</code></pre>
<p>These are just numbers, so we can calculate something like the mean. For doing this we use the function <code>mean()</code>.</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="programming-concepts.html#cb553-1"></a><span class="kw">mean</span>(algunos_numeros)</span></code></pre></div>
<pre><code>## [1] -0.2207546</code></pre>
<p>But what is a function? It is a piece of code with a name that do something with generated objects. It can generate objects when you call it our use already generated ones. For instance, what we have just done is calculating the mean of a set of numbers we generated a few lines above.</p>
<p>This function receives a set of numbers and computes their mean but it can do something else. Imagine some of these numbers are <code>NA</code>. We should know by now that the mean of <code>NA</code> is <code>NA</code>, thus if we have some <code>NA</code> data within our numbers, we’ll get <code>NA</code> when computing the mean (and other calculations).</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="programming-concepts.html#cb555-1"></a>algunos_numeros[<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">6</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb555-2"><a href="programming-concepts.html#cb555-2"></a>algunos_numeros</span></code></pre></div>
<pre><code>##  [1] -0.3584224 -0.3227992         NA -1.5462213  0.3149461         NA
##  [7] -0.9278019 -1.7762911  0.6025721  0.3918201</code></pre>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="programming-concepts.html#cb557-1"></a><span class="kw">mean</span>(algunos_numeros)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>For avoiding this results, we pass into the function more information. We can say the function not to take into account <code>NA</code> data. Doing this, the function we’ll do as desired. The way of doing this is using a parameter or argument.</p>
<p>We can use the <code>na.rm=</code> argument to deal with the <code>NA</code> values.</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="programming-concepts.html#cb559-1"></a><span class="kw">mean</span>(algunos_numeros, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] -0.4527747</code></pre>
<p>We could try to calculate the mean of <code>algunos_numeros</code> manually:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="programming-concepts.html#cb561-1"></a><span class="kw">sum</span>(algunos_numeros) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(algunos_numeros)</span></code></pre></div>
<p>It requires more coding. And we should include the <code>na.rm=TRUE</code> argument in the <code>sum()</code> function and take this into account for recalculating the length of the vector, since the <code>length()</code> function doesn’t have any argument for doing this. The <code>mean()</code> simplyfies all this.</p>
<p>Something very important is the fact that <code>algunos_numeros</code> in our example was also another argument for <code>mean()</code>. This function has several arguments and the first one is the set of numbers whose mean we want to calculate. Let’s get into this.</p>
<div id="order-of-the-arguments" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Order of the arguments</h3>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="programming-concepts.html#cb562-1"></a>mas_numeros &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">23</span>)</span>
<span id="cb562-2"><a href="programming-concepts.html#cb562-2"></a>mas_numeros</span></code></pre></div>
<pre><code>##  [1] 0.53859382 0.07238508 0.78758628 0.64420567 0.54027124 0.31568365
##  [7] 0.49614804 0.86409239 0.80507278 0.47002802 0.39032079 0.04387482
## [13] 0.58063723 0.22943255 0.42943311 0.74572542 0.34477960 0.41626907
## [19] 0.84390398 0.76753972 0.56551513 0.43716761 0.31449825</code></pre>
<p>The <code>runif()</code> function has also several arguments. We can have a look at the documentation and see that it takes three of them:</p>
<ul>
<li><code>n</code>, the number of observations that will be randomly generated;</li>
<li><code>min</code>, the minimum number allowed on the simulation;</li>
<li><code>max</code>, the maximum number allowed on the simulation.</li>
</ul>
<p>When we wrote <code>runif(23)</code> we were specifying the <code>n=</code> argument. Reading the documentation we can see that there is no need on doing this for <code>min=</code> or <code>max=</code> since values have been set for them by default. For changing them, we write them explicity.</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="programming-concepts.html#cb564-1"></a>mas_numeros &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">23</span>, <span class="dt">min =</span> <span class="dv">-15</span>, <span class="dt">max =</span> <span class="dv">-1</span>)</span>
<span id="cb564-2"><a href="programming-concepts.html#cb564-2"></a>mas_numeros</span></code></pre></div>
<pre><code>##  [1]  -4.019444  -3.399739  -2.931166  -2.672629 -13.986012  -9.916109
##  [7] -14.908869  -6.222678  -2.583648  -1.779950  -5.043804  -8.503062
## [13] -12.329554  -3.960020  -2.801435  -1.528991  -9.156267 -10.872894
## [19]  -2.487192 -13.946144  -3.788698  -8.698802  -7.250312</code></pre>
<p>Note that <code>runif(23, -15, -1)</code> or <code>runif(n = 23, min = -15, max = -1)</code> work as well (apart from the fact that it is randomly generated data and it changes with every execution). If you write the name of the argument, everything works perfectly. If you don’t write the name, you must make sure that the arguments are in the same orden as shown in the documentation. Read <strong>always</strong> the documentation in order to understand the order. In case there are many arguments in the function, you should write them all, even if they are in the correct order: it’ll make the reading easier.</p>
</div>
</div>
<div id="the-value" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> The value</h2>
<p>Almost always functions will return a result. Functions receive (usually) something as an argument. This <em>something</em> is an object, like a number, a vector, a data frame… It works with it, transforming it or making some calculations based on it and return a final result, that may be another number, data frame, a plot, a complex object,… Anything.</p>
<p><strong>Remark.</strong> It is not mandatory returning something with a function. We may see some examples later on.</p>
<p>The <code>mean()</code> function returns a number, but the <code>ggplot()</code> function returns a plot.</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="programming-concepts.html#cb566-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb566-2"><a href="programming-concepts.html#cb566-2"></a>P &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris)</span>
<span id="cb566-3"><a href="programming-concepts.html#cb566-3"></a><span class="kw">class</span>(P)</span></code></pre></div>
<pre><code>## [1] &quot;gg&quot;     &quot;ggplot&quot;</code></pre>
<p>It is important understanding what can be retrieved from a function in order to proceed working with that result. For example, since <code>P</code> is a <code>ggplot</code> object we know that we can add <code>ggplot</code> layers to it, and these layers can be generated in fact with more function.</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="programming-concepts.html#cb568-1"></a>P <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-294-1.png" width="672" /></p>
<p>Everything you do in R is a function call. Remember that: everything. Therefore, the more functions you know, the more you can do.</p>
<p>What happens when there is no function useful for what you want do? You create new one.</p>
</div>
<div id="your-own-functions" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Your own functions</h2>
<p>We have during the whole course using functions: <code>mean()</code>, <code>filter()</code>, <code>ggplot()</code>,… All those <strong>pieces of code with parenthesis were functions.</strong> Every action we do in R is a call to a function.</p>
<p>Sometimes, we need functions that have not been created yet. Bu we can create them. We do this with another function: <code>function()</code>.</p>
<p>For creating one, we need a name. Let’s create one called <code>mi_media</code>. It receives a set of numbers and will calculate its mean using <code>mean()</code>. Before this calculation, it will print a message.</p>
<p>Let’s see the skeleton:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="programming-concepts.html#cb569-1"></a>mi_media &lt;-<span class="st"> </span><span class="cf">function</span>(numeros_que_recibo){</span>
<span id="cb569-2"><a href="programming-concepts.html#cb569-2"></a>  </span>
<span id="cb569-3"><a href="programming-concepts.html#cb569-3"></a>  <span class="kw">print</span>(<span class="st">&quot;Calculando...&quot;</span>)</span>
<span id="cb569-4"><a href="programming-concepts.html#cb569-4"></a>  <span class="kw">mean</span>(numeros_que_recibo)</span>
<span id="cb569-5"><a href="programming-concepts.html#cb569-5"></a>  </span>
<span id="cb569-6"><a href="programming-concepts.html#cb569-6"></a>}</span></code></pre></div>
<p>Our function is very simple but has all what every function should have:</p>
<ul>
<li><strong>The name.</strong> We will use this for calling it, in the same you call a friend by his or her name.</li>
<li><strong>Arguments.</strong> If the function receives a set of numbers of doing something with them, we need something for representing them. We don’t know yet what numbers we will use, but we can represent them in an abstract way. We do this with arguments that will allow us parametrizing these numbers. It works as an <span class="math inline">\(x\)</span> in an equation. We don’t know the value of <span class="math inline">\(x\)</span> but we can operate with it. For instance, if <span class="math inline">\(x - 4 = 1\)</span>, we can also say that <span class="math inline">\(x - 1 = 4\)</span>. We don’t know the value of <span class="math inline">\(x\)</span> but we can work with it. In our function, we don’t know the value of <code>numeros_que_recibo</code> but we know that it should be a vector with numbers, so we can use it as if it were that. So we can calculate its mean.</li>
<li><strong>Body.</strong> It is what our function does. The arguments here will be used in an abstract way but later on we will call the function and they’ll get real values. Then, the function will work with these real values and we’ll get a result.</li>
</ul>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="programming-concepts.html#cb570-1"></a><span class="kw">mi_media</span>(mas_numeros)</span></code></pre></div>
<pre><code>## [1] &quot;Calculando...&quot;</code></pre>
<pre><code>## [1] -6.642931</code></pre>
<p>We can work with several arguments in our own function.</p>
<p>Let’s create a new function and see what happens when we change the order of the arguments.</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="programming-concepts.html#cb573-1"></a>mi_potencia &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb573-2"><a href="programming-concepts.html#cb573-2"></a><span class="co"># function to print x raised to the power y</span></span>
<span id="cb573-3"><a href="programming-concepts.html#cb573-3"></a>  resultado &lt;-<span class="st"> </span>x<span class="op">^</span>y</span>
<span id="cb573-4"><a href="programming-concepts.html#cb573-4"></a>  <span class="kw">print</span>(<span class="kw">paste</span>(x,<span class="st">&quot;elevado a&quot;</span>, y, <span class="st">&quot;es&quot;</span>, resultado))</span>
<span id="cb573-5"><a href="programming-concepts.html#cb573-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="programming-concepts.html#cb574-1"></a><span class="kw">mi_potencia</span>(<span class="dv">8</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8 elevado a 2 es 64&quot;</code></pre>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="programming-concepts.html#cb576-1"></a><span class="kw">mi_potencia</span>(<span class="dv">2</span>, <span class="dv">8</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2 elevado a 8 es 256&quot;</code></pre>
<p>The first thing the function receives is the <code>x</code> and then the <code>y</code>. If we don’t say anything, this is always like this for this <code>mi_potencia</code> function. This is why is not the same using the 2 first and the 8 secondly.</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="programming-concepts.html#cb578-1"></a><span class="kw">mi_potencia</span>(<span class="dv">8</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8 elevado a 2 es 64&quot;</code></pre>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="programming-concepts.html#cb580-1"></a><span class="kw">mi_potencia</span>(<span class="dt">x =</span> <span class="dv">8</span>, <span class="dt">y =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8 elevado a 2 es 64&quot;</code></pre>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="programming-concepts.html#cb582-1"></a><span class="kw">mi_potencia</span>(<span class="dt">y =</span> <span class="dv">8</span>, <span class="dt">x =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2 elevado a 8 es 256&quot;</code></pre>
<p>But we can say explicitily what the <code>x</code> and the <code>y</code> is so the function we’ll not make assumptions.</p>
<p>Now let’s make, by default, the exponent equals to 2.</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="programming-concepts.html#cb584-1"></a>mi_potencia &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">y =</span> <span class="dv">2</span>) {</span>
<span id="cb584-2"><a href="programming-concepts.html#cb584-2"></a>  resultado &lt;-<span class="st"> </span>x<span class="op">^</span>y</span>
<span id="cb584-3"><a href="programming-concepts.html#cb584-3"></a>  <span class="kw">print</span>(<span class="kw">paste</span>(x,<span class="st">&quot;elevado a&quot;</span>, y, <span class="st">&quot;es&quot;</span>, resultado))</span>
<span id="cb584-4"><a href="programming-concepts.html#cb584-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="programming-concepts.html#cb585-1"></a><span class="kw">mi_potencia</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;10 elevado a 2 es 100&quot;</code></pre>
<p>What we have done is fixing a value for <code>y</code>, so there is no need to specify the value. It is 2 by default. If we want to change it, we just mention it when we call the function.</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="programming-concepts.html#cb587-1"></a><span class="kw">mi_potencia</span>(<span class="dv">10</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;10 elevado a 3 es 1000&quot;</code></pre>
</div>
<div id="exercises-2" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>Create a function that receives a vector <code>x</code> of numbers and a number <code>a</code> and plots, based on them, the curve of the mathematical function <span class="math inline">\(f(x) = xln(ax)\)</span> being <span class="math inline">\(a\)</span> a positive real number. Make sure that <code>a</code> equals 1 by default. The function should include this vector as the column of a data frame (<code>tibble()</code> function is needed). Then it will create another column with the formula of the mathematical function, with dplyr. Finally, with ggplot2, it will plot the curve. A line plot will suffice. For checking that the function works correctly, call it with the vector generated by this code: <code>seq(0.01, 1, by = 0.01)</code>. Try different <code>x</code> and <code>a</code> cases to see how the plot changes.</li>
</ol>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="programming-concepts.html#cb589-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb589-2"><a href="programming-concepts.html#cb589-2"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb589-3"><a href="programming-concepts.html#cb589-3"></a></span>
<span id="cb589-4"><a href="programming-concepts.html#cb589-4"></a>xlnx &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">a =</span> <span class="dv">1</span>){</span>
<span id="cb589-5"><a href="programming-concepts.html#cb589-5"></a>  </span>
<span id="cb589-6"><a href="programming-concepts.html#cb589-6"></a>  df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> x) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb589-7"><a href="programming-concepts.html#cb589-7"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">y =</span> x <span class="op">*</span><span class="st"> </span><span class="kw">log</span>(a <span class="op">*</span><span class="st"> </span>x))</span>
<span id="cb589-8"><a href="programming-concepts.html#cb589-8"></a>  </span>
<span id="cb589-9"><a href="programming-concepts.html#cb589-9"></a>  <span class="kw">ggplot</span>(df) <span class="op">+</span><span class="st"> </span></span>
<span id="cb589-10"><a href="programming-concepts.html#cb589-10"></a><span class="st">    </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y))</span>
<span id="cb589-11"><a href="programming-concepts.html#cb589-11"></a>}</span>
<span id="cb589-12"><a href="programming-concepts.html#cb589-12"></a></span>
<span id="cb589-13"><a href="programming-concepts.html#cb589-13"></a><span class="kw">xlnx</span>(<span class="kw">seq</span>(<span class="fl">0.01</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.01</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-303-1.png" width="672" /></p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="programming-concepts.html#cb590-1"></a><span class="co"># xlnx(seq(1, 100, by = 1), a = 0.01)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p>In the function you created before, include a piece of code that will avoid accepting cases where the logarithm will be evaluated under negative numbers.</p></li>
<li><p>We are going to define a function that reads a csv about air quality in Madrid, fix the format of two columns and returns it. After that, we will merge all the information from the files into one only data frame. The files are the ones that begin with <code>NO2</code> or <code>CO</code>. First, the function will receive the path of a file. It reads it (do this with readr; guess the function) and now we have to use dplyr for fixing the columns <code>mes</code> and <code>dia</code>. We want them to be numeric. <code>mes</code> is easy but for <code>dia</code> you will need to use some character treatment. Try to use <code>str_remove()</code> from the stringr package. Now make sure the function returns the data frame you created. Also, exclude the <code>magnitud</code> function: it is not necessary because the last columns specifies the magnitude. The joining stuff is the next exercise. For now, make sure that the function works for the six data frames.</p></li>
</ol>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="programming-concepts.html#cb591-1"></a><span class="kw">library</span>(stringr)</span>
<span id="cb591-2"><a href="programming-concepts.html#cb591-2"></a></span>
<span id="cb591-3"><a href="programming-concepts.html#cb591-3"></a>trata_fichero &lt;-<span class="st"> </span><span class="cf">function</span>(ruta_al_fichero){</span>
<span id="cb591-4"><a href="programming-concepts.html#cb591-4"></a>  df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(ruta_al_fichero) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb591-5"><a href="programming-concepts.html#cb591-5"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">mes =</span> <span class="kw">as.numeric</span>(mes), </span>
<span id="cb591-6"><a href="programming-concepts.html#cb591-6"></a>           <span class="dt">dia =</span> <span class="kw">str_remove</span>(dia, <span class="st">&quot;d&quot;</span>), </span>
<span id="cb591-7"><a href="programming-concepts.html#cb591-7"></a>           <span class="dt">dia =</span> <span class="kw">as.numeric</span>(dia), </span>
<span id="cb591-8"><a href="programming-concepts.html#cb591-8"></a>           <span class="dt">magnitud =</span> <span class="ot">NULL</span>)  </span>
<span id="cb591-9"><a href="programming-concepts.html#cb591-9"></a>  </span>
<span id="cb591-10"><a href="programming-concepts.html#cb591-10"></a>  <span class="kw">return</span>(df)</span>
<span id="cb591-11"><a href="programming-concepts.html#cb591-11"></a>}</span>
<span id="cb591-12"><a href="programming-concepts.html#cb591-12"></a></span>
<span id="cb591-13"><a href="programming-concepts.html#cb591-13"></a><span class="co"># trata_fichero(&quot;../../data/NO2_2017.csv&quot;)</span></span>
<span id="cb591-14"><a href="programming-concepts.html#cb591-14"></a><span class="co"># trata_fichero(&quot;../../data/NO2_2018.csv&quot;)</span></span>
<span id="cb591-15"><a href="programming-concepts.html#cb591-15"></a><span class="kw">trata_fichero</span>(<span class="st">&quot;data/NO2_2019.csv&quot;</span>)</span>
<span id="cb591-16"><a href="programming-concepts.html#cb591-16"></a><span class="kw">trata_fichero</span>(<span class="st">&quot;data/CO_2019.csv&quot;</span>)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Now we want to mix all the information. Create one data frame with all the data about NO2 and another one about CO. Use <code>bind_rows()</code> from dplyr for this. After that, join them all with <code>inner_join()</code>. How many rows are there? Do the same with <code>full_join()</code>, <code>right_join()</code>, and <code>left_join()</code>. What differences do you see?</li>
</ol>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="programming-concepts.html#cb592-1"></a><span class="kw">inner_join</span>(</span>
<span id="cb592-2"><a href="programming-concepts.html#cb592-2"></a>  <span class="kw">bind_rows</span>(</span>
<span id="cb592-3"><a href="programming-concepts.html#cb592-3"></a>    <span class="kw">trata_fichero</span>(<span class="st">&quot;data/NO2_2017.csv&quot;</span>),</span>
<span id="cb592-4"><a href="programming-concepts.html#cb592-4"></a>    <span class="kw">trata_fichero</span>(<span class="st">&quot;data/NO2_2018.csv&quot;</span>),</span>
<span id="cb592-5"><a href="programming-concepts.html#cb592-5"></a>    <span class="kw">trata_fichero</span>(<span class="st">&quot;data/NO2_2019.csv&quot;</span>)</span>
<span id="cb592-6"><a href="programming-concepts.html#cb592-6"></a>  ), </span>
<span id="cb592-7"><a href="programming-concepts.html#cb592-7"></a>  <span class="kw">bind_rows</span>(</span>
<span id="cb592-8"><a href="programming-concepts.html#cb592-8"></a>    <span class="kw">trata_fichero</span>(<span class="st">&quot;data/CO_2017.csv&quot;</span>),</span>
<span id="cb592-9"><a href="programming-concepts.html#cb592-9"></a>    <span class="kw">trata_fichero</span>(<span class="st">&quot;data/CO_2018.csv&quot;</span>),</span>
<span id="cb592-10"><a href="programming-concepts.html#cb592-10"></a>    <span class="kw">trata_fichero</span>(<span class="st">&quot;data/CO_2019.csv&quot;</span>)</span>
<span id="cb592-11"><a href="programming-concepts.html#cb592-11"></a>  )  </span>
<span id="cb592-12"><a href="programming-concepts.html#cb592-12"></a>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb592-13"><a href="programming-concepts.html#cb592-13"></a><span class="st">  </span><span class="kw">nrow</span>()</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Could you guess what the result of the next code is, without executing it? What is the rol of each <code>c</code>?</li>
</ol>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="programming-concepts.html#cb593-1"></a>c &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb593-2"><a href="programming-concepts.html#cb593-2"></a><span class="kw">c</span>(<span class="dt">c =</span> c)</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li><p>The <code>letters</code> vector contains all the letter from <code>"a"</code> to <code>"z"</code>. You can select a random sample with the <code>sample()</code> function. Create a function that receives an integer number <span class="math inline">\(n\)</span>, then it creates a sample of <span class="math inline">\(n\)</span> letters. After that, it sorts the letters and finally it collapses them all with the <code>paste0()</code> function and the <code>collapse=</code> attribute.</p></li>
<li><p>Create a function similar to the previous one but, instead of generating a sample from <code>letters</code>, it generates two samples: one with <code>letters</code> and one from <code>LETTERS</code>. The function must receive one argument for the number of elements from <code>letters</code> and another one for <code>LETTERS</code>. Then it will create one vector with the two samples (use <code>c()</code>). Now sort that vector and collapse all the letters.</p></li>
<li><p>Create a function that receives two columns from the <code>iris</code> data frame as two characters and multiplies these two columns. Create another one with the this product you just calculated. Do <strong>not</strong> use dplyr.</p></li>
<li><p>Create a function that reads the data frame about Human Resources data. The path should be one of the arguments of the function. Then it will select all the columns except sales and salary. Now generate a random logical vector whose length will be the number of rows of the data frame. This vector should have a bigger amount of <code>TRUE</code>s than <code>FALSE</code>s: the weight should be an attribute of the function (it consists just on a vector of two numbers whose addition is 1, e.g., 0.7 and 0.3). This will be used for splitting the data frame into two data frames. This can be done with <code>filter()</code>. Then use the <code>glm()</code> for developing a predictive model with the first part of the data frame (the biggest one). Then use the other data frame for making a prediction with the <code>predict()</code> model. You can check how many cases you have correctly predicted with the <code>table()</code> function. Make the function returning this table. You have just developped a model for predicting which employees are more inclined to leaving the company.</p></li>
<li><p>Have a look at these codes and try to guess which will be the value of <code>a</code>, <code>aa</code> and <code>aaa</code>. Don’t run the code until you have an idea of the final result.</p></li>
</ol>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="programming-concepts.html#cb594-1"></a>a &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb594-2"><a href="programming-concepts.html#cb594-2"></a></span>
<span id="cb594-3"><a href="programming-concepts.html#cb594-3"></a>mi_funcion &lt;-<span class="st"> </span><span class="cf">function</span>(b){</span>
<span id="cb594-4"><a href="programming-concepts.html#cb594-4"></a>  <span class="cf">if</span>(b <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb594-5"><a href="programming-concepts.html#cb594-5"></a>    a &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb594-6"><a href="programming-concepts.html#cb594-6"></a>  } <span class="cf">else</span> {</span>
<span id="cb594-7"><a href="programming-concepts.html#cb594-7"></a>    a &lt;-<span class="st"> </span><span class="dv">-50</span></span>
<span id="cb594-8"><a href="programming-concepts.html#cb594-8"></a>  }</span>
<span id="cb594-9"><a href="programming-concepts.html#cb594-9"></a>  </span>
<span id="cb594-10"><a href="programming-concepts.html#cb594-10"></a>}</span>
<span id="cb594-11"><a href="programming-concepts.html#cb594-11"></a></span>
<span id="cb594-12"><a href="programming-concepts.html#cb594-12"></a><span class="kw">mi_funcion</span>(<span class="dv">10</span>)</span>
<span id="cb594-13"><a href="programming-concepts.html#cb594-13"></a>a</span></code></pre></div>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="programming-concepts.html#cb595-1"></a>aa &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb595-2"><a href="programming-concepts.html#cb595-2"></a></span>
<span id="cb595-3"><a href="programming-concepts.html#cb595-3"></a>mi_funcion2 &lt;-<span class="st"> </span><span class="cf">function</span>(b){</span>
<span id="cb595-4"><a href="programming-concepts.html#cb595-4"></a>  </span>
<span id="cb595-5"><a href="programming-concepts.html#cb595-5"></a>  <span class="cf">if</span>(<span class="kw">is.character</span>(b)){</span>
<span id="cb595-6"><a href="programming-concepts.html#cb595-6"></a>    aa &lt;-<span class="st"> </span>aa <span class="op">+</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb595-7"><a href="programming-concepts.html#cb595-7"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="kw">is.numeric</span>(b)){</span>
<span id="cb595-8"><a href="programming-concepts.html#cb595-8"></a>    aa &lt;-<span class="st"> </span>aa <span class="op">-</span><span class="st"> </span><span class="dv">20</span></span>
<span id="cb595-9"><a href="programming-concepts.html#cb595-9"></a>  }</span>
<span id="cb595-10"><a href="programming-concepts.html#cb595-10"></a>  </span>
<span id="cb595-11"><a href="programming-concepts.html#cb595-11"></a>}</span>
<span id="cb595-12"><a href="programming-concepts.html#cb595-12"></a></span>
<span id="cb595-13"><a href="programming-concepts.html#cb595-13"></a><span class="kw">mi_funcion2</span>(<span class="st">&quot;hola&quot;</span>)</span>
<span id="cb595-14"><a href="programming-concepts.html#cb595-14"></a>aa</span></code></pre></div>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="programming-concepts.html#cb596-1"></a>mi_funcion3 &lt;-<span class="st"> </span><span class="cf">function</span>(aaa, b){</span>
<span id="cb596-2"><a href="programming-concepts.html#cb596-2"></a>  aaa &lt;-<span class="st"> </span>aaa <span class="op">+</span><span class="st"> </span>b</span>
<span id="cb596-3"><a href="programming-concepts.html#cb596-3"></a>  <span class="kw">return</span>(aaa)</span>
<span id="cb596-4"><a href="programming-concepts.html#cb596-4"></a>}</span>
<span id="cb596-5"><a href="programming-concepts.html#cb596-5"></a></span>
<span id="cb596-6"><a href="programming-concepts.html#cb596-6"></a>b &lt;-<span class="st"> </span><span class="kw">mi_funcion3</span>(<span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb596-7"><a href="programming-concepts.html#cb596-7"></a>aaa</span></code></pre></div>
<ol start="11" style="list-style-type: decimal">
<li>Create a function with two attributes. The first one is called <code>case=</code> and it will receive a word. The second one is called <code>times=</code> and it receives an integer number. If the word it receives is <code>"dados"</code> or <code>"Dados"</code>, it generates two vectors of length <code>times</code>, with values from 1 to 6. Create another vector adding these two vectors and calculate which is the more frequent result. If the word is <code>"coin"</code> or <code>"Coin"</code>, then simulate flipping a coin with the <code>bernoulli()</code> function and calculate the probability of getting each result. Flip the coin the number of times indicated in the <code>times=</code> attribute of the function. If the received word is something else, print <code>"I don't know what to do with this"</code>.</li>
</ol>
</div>
<div id="conditions" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Conditions</h2>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="programming-concepts.html#cb597-1"></a>a &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb597-2"><a href="programming-concepts.html#cb597-2"></a><span class="cf">if</span>(a <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>){</span>
<span id="cb597-3"><a href="programming-concepts.html#cb597-3"></a>  <span class="kw">print</span>(<span class="st">&quot;a is greater than 2&quot;</span>)</span>
<span id="cb597-4"><a href="programming-concepts.html#cb597-4"></a>} <span class="cf">else</span> {</span>
<span id="cb597-5"><a href="programming-concepts.html#cb597-5"></a>  <span class="kw">print</span>(<span class="st">&quot;a is lower or equal to 2&quot;</span>)</span>
<span id="cb597-6"><a href="programming-concepts.html#cb597-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;a is greater than 2&quot;</code></pre>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="programming-concepts.html#cb599-1"></a>b &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb599-2"><a href="programming-concepts.html#cb599-2"></a><span class="cf">if</span>(b <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>b <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>){</span>
<span id="cb599-3"><a href="programming-concepts.html#cb599-3"></a>  <span class="kw">print</span>(<span class="st">&quot;I like b&quot;</span>)</span>
<span id="cb599-4"><a href="programming-concepts.html#cb599-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="programming-concepts.html#cb600-1"></a>a &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb600-2"><a href="programming-concepts.html#cb600-2"></a>b &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb600-3"><a href="programming-concepts.html#cb600-3"></a></span>
<span id="cb600-4"><a href="programming-concepts.html#cb600-4"></a><span class="cf">if</span>(a <span class="op">&gt;=</span><span class="st"> </span>b){</span>
<span id="cb600-5"><a href="programming-concepts.html#cb600-5"></a>  c &lt;-<span class="st"> &quot;greater&quot;</span></span>
<span id="cb600-6"><a href="programming-concepts.html#cb600-6"></a>} <span class="cf">else</span> {</span>
<span id="cb600-7"><a href="programming-concepts.html#cb600-7"></a>  d &lt;-<span class="st"> &quot;lower&quot;</span></span>
<span id="cb600-8"><a href="programming-concepts.html#cb600-8"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="programming-concepts.html#cb601-1"></a>a &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb601-2"><a href="programming-concepts.html#cb601-2"></a>b &lt;-<span class="st"> </span><span class="dv">-3</span></span>
<span id="cb601-3"><a href="programming-concepts.html#cb601-3"></a></span>
<span id="cb601-4"><a href="programming-concepts.html#cb601-4"></a><span class="cf">if</span>(a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>b <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb601-5"><a href="programming-concepts.html#cb601-5"></a>  c &lt;-<span class="st"> </span>a <span class="op">/</span><span class="st"> </span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span>b</span>
<span id="cb601-6"><a href="programming-concepts.html#cb601-6"></a>} <span class="cf">else</span> {</span>
<span id="cb601-7"><a href="programming-concepts.html#cb601-7"></a>  c &lt;-<span class="st"> </span>a</span>
<span id="cb601-8"><a href="programming-concepts.html#cb601-8"></a>}</span>
<span id="cb601-9"><a href="programming-concepts.html#cb601-9"></a>c</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="programming-concepts.html#cb603-1"></a>a &lt;-<span class="st"> </span><span class="dv">10</span></span>
<span id="cb603-2"><a href="programming-concepts.html#cb603-2"></a>b &lt;-<span class="st"> </span><span class="dv">-3</span></span>
<span id="cb603-3"><a href="programming-concepts.html#cb603-3"></a></span>
<span id="cb603-4"><a href="programming-concepts.html#cb603-4"></a><span class="cf">if</span>(a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>b <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb603-5"><a href="programming-concepts.html#cb603-5"></a>  c &lt;-<span class="st"> </span>a <span class="op">/</span><span class="st"> </span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span>b <span class="op">/</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb603-6"><a href="programming-concepts.html#cb603-6"></a>} <span class="cf">else</span> <span class="cf">if</span>(a <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>b <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb603-7"><a href="programming-concepts.html#cb603-7"></a>  c &lt;-<span class="st"> </span>a <span class="op">/</span><span class="st"> </span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span>b</span>
<span id="cb603-8"><a href="programming-concepts.html#cb603-8"></a>} <span class="cf">else</span> {</span>
<span id="cb603-9"><a href="programming-concepts.html#cb603-9"></a>  c &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span>b</span>
<span id="cb603-10"><a href="programming-concepts.html#cb603-10"></a>}</span>
<span id="cb603-11"><a href="programming-concepts.html#cb603-11"></a>c</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
</div>
<div id="joining-data-frames-with-dplyr" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Joining data frames with dplyr</h2>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="programming-concepts.html#cb605-1"></a><span class="kw">library</span>(readr)</span>
<span id="cb605-2"><a href="programming-concepts.html#cb605-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb605-3"><a href="programming-concepts.html#cb605-3"></a></span>
<span id="cb605-4"><a href="programming-concepts.html#cb605-4"></a>df_hombres &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;data/evolutivo_poblacion_varones.datos&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>())</span>
<span id="cb605-5"><a href="programming-concepts.html#cb605-5"></a>df_mujeres &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(<span class="st">&quot;data/evolutivo_poblacion_mujeres.datos&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>())</span>
<span id="cb605-6"><a href="programming-concepts.html#cb605-6"></a></span>
<span id="cb605-7"><a href="programming-concepts.html#cb605-7"></a><span class="kw">glimpse</span>(df_hombres)</span></code></pre></div>
<pre><code>## Rows: 750
## Columns: 3
## $ provincia &lt;chr&gt; &quot;02 Albacete&quot;, &quot;02 Albacete&quot;, &quot;02 Albacete&quot;, &quot;02 Albacete&quot;,…
## $ year      &lt;dbl&gt; 2018, 2017, 2016, 2009, 2008, 2007, 2006, 2005, 2004, 2003,…
## $ hombres   &lt;dbl&gt; 194628, 195289, 196277, 199729, 197673, 195338, 193310, 192…</code></pre>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="programming-concepts.html#cb607-1"></a><span class="kw">glimpse</span>(df_mujeres)</span></code></pre></div>
<pre><code>## Rows: 816
## Columns: 3
## $ provincia &lt;chr&gt; &quot;02 Albacete&quot;, &quot;02 Albacete&quot;, &quot;02 Albacete&quot;, &quot;02 Albacete&quot;,…
## $ year      &lt;dbl&gt; 2018, 2017, 2015, 2013, 2012, 2011, 2010, 2009, 2008, 2007,…
## $ mujeres   &lt;dbl&gt; 194158, 194743, 197014, 200016, 201640, 201400, 201396, 201…</code></pre>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="programming-concepts.html#cb609-1"></a>df_hombres_<span class="dv">2017</span> &lt;-<span class="st"> </span>df_hombres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb609-2"><a href="programming-concepts.html#cb609-2"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>)</span>
<span id="cb609-3"><a href="programming-concepts.html#cb609-3"></a></span>
<span id="cb609-4"><a href="programming-concepts.html#cb609-4"></a>df_mujeres_<span class="dv">2017</span> &lt;-<span class="st"> </span>df_mujeres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb609-5"><a href="programming-concepts.html#cb609-5"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>)</span>
<span id="cb609-6"><a href="programming-concepts.html#cb609-6"></a></span>
<span id="cb609-7"><a href="programming-concepts.html#cb609-7"></a><span class="kw">nrow</span>(df_mujeres_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## [1] 51</code></pre>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="programming-concepts.html#cb611-1"></a><span class="kw">nrow</span>(df_hombres_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## [1] 50</code></pre>
<p>Hay más filas en un data frame que en otro: estas tablas han sido tratadas previamente y en uno caso falta una provincia y en otro, dos.</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="programming-concepts.html#cb613-1"></a>df_union_<span class="dv">2017</span> &lt;-<span class="st"> </span><span class="kw">inner_join</span>(df_mujeres_<span class="dv">2017</span>, df_hombres_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;provincia&quot;, &quot;year&quot;)</code></pre>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="programming-concepts.html#cb615-1"></a><span class="kw">glimpse</span>(df_union_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## Rows: 49
## Columns: 4
## $ provincia &lt;chr&gt; &quot;02 Albacete&quot;, &quot;03 Alicante/Alacant&quot;, &quot;04 Almeria&quot;, &quot;01 Ara…
## $ year      &lt;dbl&gt; 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017,…
## $ mujeres   &lt;dbl&gt; 194743, 904711, 359676, 161354, 493911, 80674, 336566, 5618…
## $ hombres   &lt;dbl&gt; 195289, 920621, 346996, 165220, 541049, 80026, 343318, 5671…</code></pre>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="programming-concepts.html#cb617-1"></a>df_union_<span class="dv">2017</span>_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">left_join</span>(df_mujeres_<span class="dv">2017</span>, df_hombres_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;provincia&quot;, &quot;year&quot;)</code></pre>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="programming-concepts.html#cb619-1"></a><span class="kw">nrow</span>(df_union_<span class="dv">2017</span>_<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 51</code></pre>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="programming-concepts.html#cb621-1"></a>df_union_<span class="dv">2017</span>_<span class="dv">2</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb621-2"><a href="programming-concepts.html#cb621-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(hombres))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   provincia    year mujeres hombres
##   &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 18 Granada   2017  449821      NA
## 2 34 Palencia  2017   80943      NA</code></pre>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="programming-concepts.html#cb623-1"></a>df_union_<span class="dv">2017</span>_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">full_join</span>(df_mujeres_<span class="dv">2017</span>, df_hombres_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;provincia&quot;, &quot;year&quot;)</code></pre>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="programming-concepts.html#cb625-1"></a><span class="kw">nrow</span>(df_union_<span class="dv">2017</span>_<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 52</code></pre>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="programming-concepts.html#cb627-1"></a>df_union_<span class="dv">2017</span>_<span class="dv">3</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb627-2"><a href="programming-concepts.html#cb627-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(mujeres))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   provincia  year mujeres hombres
##   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 22 Huesca  2017      NA  108848</code></pre>
</div>
<div id="binding-data-frames" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Binding data frames</h2>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="programming-concepts.html#cb629-1"></a>df_hombres_<span class="dv">2017</span>_aux &lt;-<span class="st"> </span>df_hombres_<span class="dv">2017</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb629-2"><a href="programming-concepts.html#cb629-2"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">value =</span> hombres) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb629-3"><a href="programming-concepts.html#cb629-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caso =</span> <span class="st">&quot;hombres&quot;</span>) </span>
<span id="cb629-4"><a href="programming-concepts.html#cb629-4"></a></span>
<span id="cb629-5"><a href="programming-concepts.html#cb629-5"></a>df_mujeres_<span class="dv">2017</span>_aux &lt;-<span class="st"> </span>df_mujeres_<span class="dv">2017</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb629-6"><a href="programming-concepts.html#cb629-6"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">value =</span> mujeres) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb629-7"><a href="programming-concepts.html#cb629-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">caso =</span> <span class="st">&quot;mujeres&quot;</span>)  </span>
<span id="cb629-8"><a href="programming-concepts.html#cb629-8"></a></span>
<span id="cb629-9"><a href="programming-concepts.html#cb629-9"></a>df_<span class="dv">2017</span> &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(df_hombres_<span class="dv">2017</span>_aux, df_mujeres_<span class="dv">2017</span>_aux)</span>
<span id="cb629-10"><a href="programming-concepts.html#cb629-10"></a></span>
<span id="cb629-11"><a href="programming-concepts.html#cb629-11"></a><span class="kw">glimpse</span>(df_<span class="dv">2017</span>)</span></code></pre></div>
<pre><code>## Rows: 101
## Columns: 4
## $ provincia &lt;chr&gt; &quot;02 Albacete&quot;, &quot;03 Alicante/Alacant&quot;, &quot;04 Almeria&quot;, &quot;01 Ara…
## $ year      &lt;dbl&gt; 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017,…
## $ value     &lt;dbl&gt; 195289, 920621, 346996, 165220, 541049, 80026, 343318, 5671…
## $ caso      &lt;chr&gt; &quot;hombres&quot;, &quot;hombres&quot;, &quot;hombres&quot;, &quot;hombres&quot;, &quot;hombres&quot;, &quot;hom…</code></pre>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="programming-concepts.html#cb631-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb631-2"><a href="programming-concepts.html#cb631-2"></a><span class="kw">ggplot</span>(df_<span class="dv">2017</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb631-3"><a href="programming-concepts.html#cb631-3"></a><span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x =</span> provincia, <span class="dt">y =</span> value, <span class="dt">fill =</span> caso), <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb631-4"><a href="programming-concepts.html#cb631-4"></a><span class="st">  </span><span class="kw">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-325-1.png" width="672" /></p>
</div>
<div id="exercises-3" class="section level2" number="5.9">
<h2><span class="header-section-number">5.9</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>Create a function that join the <code>df_hombres</code> and <code>df_mujeres</code> data frames. It will receive a number that will be a year used as a filter. It will also receive a word for deciding among the four cases: if the word is <code>"left"</code>, it will join via <code>left_join()</code>, if it is <code>"inner"</code>, via <code>inner_join()</code>, and so on. If the word is not <code>"left"</code>, <code>"inner"</code>, <code>"right"</code> or <code>"full"</code> it will print a message saying <code>"I don't know what to do with this"</code>.</li>
</ol>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="programming-concepts.html#cb632-1"></a>funcion1 &lt;-<span class="st"> </span><span class="cf">function</span>(anno, case){</span>
<span id="cb632-2"><a href="programming-concepts.html#cb632-2"></a>  </span>
<span id="cb632-3"><a href="programming-concepts.html#cb632-3"></a>  df_hombres_filtrado &lt;-<span class="st"> </span>df_hombres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb632-4"><a href="programming-concepts.html#cb632-4"></a><span class="st">    </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>anno)</span>
<span id="cb632-5"><a href="programming-concepts.html#cb632-5"></a>  </span>
<span id="cb632-6"><a href="programming-concepts.html#cb632-6"></a>  df_mujeres_filtrado &lt;-<span class="st"> </span>df_mujeres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb632-7"><a href="programming-concepts.html#cb632-7"></a><span class="st">    </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>anno)</span>
<span id="cb632-8"><a href="programming-concepts.html#cb632-8"></a>  </span>
<span id="cb632-9"><a href="programming-concepts.html#cb632-9"></a>  <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;left&quot;</span>){</span>
<span id="cb632-10"><a href="programming-concepts.html#cb632-10"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(df_mujeres_filtrado)</span>
<span id="cb632-11"><a href="programming-concepts.html#cb632-11"></a>  } <span class="cf">else</span> <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;inner&quot;</span>){</span>
<span id="cb632-12"><a href="programming-concepts.html#cb632-12"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(df_mujeres_filtrado)</span>
<span id="cb632-13"><a href="programming-concepts.html#cb632-13"></a>  } <span class="cf">else</span> <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;right&quot;</span>){</span>
<span id="cb632-14"><a href="programming-concepts.html#cb632-14"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">right_join</span>(df_mujeres_filtrado)</span>
<span id="cb632-15"><a href="programming-concepts.html#cb632-15"></a>  } <span class="cf">else</span> <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;full&quot;</span>){</span>
<span id="cb632-16"><a href="programming-concepts.html#cb632-16"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">full_join</span>(df_mujeres_filtrado)</span>
<span id="cb632-17"><a href="programming-concepts.html#cb632-17"></a>  } <span class="cf">else</span> {</span>
<span id="cb632-18"><a href="programming-concepts.html#cb632-18"></a>    <span class="kw">print</span>(<span class="st">&quot;I don&#39;t know what to do with this&quot;</span>)</span>
<span id="cb632-19"><a href="programming-concepts.html#cb632-19"></a>  }</span>
<span id="cb632-20"><a href="programming-concepts.html#cb632-20"></a>  </span>
<span id="cb632-21"><a href="programming-concepts.html#cb632-21"></a>}</span>
<span id="cb632-22"><a href="programming-concepts.html#cb632-22"></a></span>
<span id="cb632-23"><a href="programming-concepts.html#cb632-23"></a><span class="kw">funcion1</span>(<span class="dv">2017</span>, <span class="st">&quot;inner&quot;</span>)</span>
<span id="cb632-24"><a href="programming-concepts.html#cb632-24"></a><span class="kw">funcion1</span>(<span class="dv">2017</span>, <span class="st">&quot;left&quot;</span>)</span>
<span id="cb632-25"><a href="programming-concepts.html#cb632-25"></a><span class="kw">funcion1</span>(<span class="dv">2017</span>, <span class="st">&quot;right&quot;</span>)</span>
<span id="cb632-26"><a href="programming-concepts.html#cb632-26"></a><span class="kw">funcion1</span>(<span class="dv">2017</span>, <span class="st">&quot;full&quot;</span>)</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Add to the previous function a piece of code that will print a message if the year passed as a parameter is not among the available ones.</li>
</ol>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="programming-concepts.html#cb633-1"></a>funcion2 &lt;-<span class="st"> </span><span class="cf">function</span>(anno, case){</span>
<span id="cb633-2"><a href="programming-concepts.html#cb633-2"></a>  </span>
<span id="cb633-3"><a href="programming-concepts.html#cb633-3"></a>  annos_disponibles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">unique</span>(df_hombres<span class="op">$</span>year), <span class="kw">unique</span>(df_mujeres<span class="op">$</span>year))</span>
<span id="cb633-4"><a href="programming-concepts.html#cb633-4"></a>  </span>
<span id="cb633-5"><a href="programming-concepts.html#cb633-5"></a>  <span class="co"># With stop() I force an error in case the selected year is not available. If you receive an error followed by this message, your function works fine :)</span></span>
<span id="cb633-6"><a href="programming-concepts.html#cb633-6"></a>  <span class="cf">if</span>(<span class="op">!</span>anno <span class="op">%in%</span><span class="st"> </span>annos_disponibles){</span>
<span id="cb633-7"><a href="programming-concepts.html#cb633-7"></a>    <span class="kw">stop</span>(<span class="st">&quot;The selected year is not available&quot;</span>)</span>
<span id="cb633-8"><a href="programming-concepts.html#cb633-8"></a>  }</span>
<span id="cb633-9"><a href="programming-concepts.html#cb633-9"></a>  </span>
<span id="cb633-10"><a href="programming-concepts.html#cb633-10"></a>  df_hombres_filtrado &lt;-<span class="st"> </span>df_hombres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb633-11"><a href="programming-concepts.html#cb633-11"></a><span class="st">    </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>anno)</span>
<span id="cb633-12"><a href="programming-concepts.html#cb633-12"></a>  </span>
<span id="cb633-13"><a href="programming-concepts.html#cb633-13"></a>  df_mujeres_filtrado &lt;-<span class="st"> </span>df_mujeres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb633-14"><a href="programming-concepts.html#cb633-14"></a><span class="st">    </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span>anno)</span>
<span id="cb633-15"><a href="programming-concepts.html#cb633-15"></a>  </span>
<span id="cb633-16"><a href="programming-concepts.html#cb633-16"></a>  <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;left&quot;</span>){</span>
<span id="cb633-17"><a href="programming-concepts.html#cb633-17"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(df_mujeres_filtrado)</span>
<span id="cb633-18"><a href="programming-concepts.html#cb633-18"></a>  } <span class="cf">else</span> <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;inner&quot;</span>){</span>
<span id="cb633-19"><a href="programming-concepts.html#cb633-19"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(df_mujeres_filtrado)</span>
<span id="cb633-20"><a href="programming-concepts.html#cb633-20"></a>  } <span class="cf">else</span> <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;right&quot;</span>){</span>
<span id="cb633-21"><a href="programming-concepts.html#cb633-21"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">right_join</span>(df_mujeres_filtrado)</span>
<span id="cb633-22"><a href="programming-concepts.html#cb633-22"></a>  } <span class="cf">else</span> <span class="cf">if</span>(case <span class="op">==</span><span class="st"> &quot;full&quot;</span>){</span>
<span id="cb633-23"><a href="programming-concepts.html#cb633-23"></a>    df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">full_join</span>(df_mujeres_filtrado)</span>
<span id="cb633-24"><a href="programming-concepts.html#cb633-24"></a>  } <span class="cf">else</span> {</span>
<span id="cb633-25"><a href="programming-concepts.html#cb633-25"></a>    <span class="kw">print</span>(<span class="st">&quot;I don&#39;t know what to do with this&quot;</span>)</span>
<span id="cb633-26"><a href="programming-concepts.html#cb633-26"></a>  }</span>
<span id="cb633-27"><a href="programming-concepts.html#cb633-27"></a>  </span>
<span id="cb633-28"><a href="programming-concepts.html#cb633-28"></a>}</span>
<span id="cb633-29"><a href="programming-concepts.html#cb633-29"></a></span>
<span id="cb633-30"><a href="programming-concepts.html#cb633-30"></a><span class="kw">funcion2</span>(<span class="dv">1980</span>, <span class="st">&quot;inner&quot;</span>)</span>
<span id="cb633-31"><a href="programming-concepts.html#cb633-31"></a><span class="co"># Error in funcion2(1980, &quot;inner&quot;) : The selected year is not available</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Pick the first five years of history and plot the evolution of the men and women population along these years.</li>
</ol>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="programming-concepts.html#cb634-1"></a>annos_seleccionados &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1998</span>, <span class="dv">1999</span>, <span class="dv">2000</span>, <span class="dv">2001</span>, <span class="dv">2002</span>)</span>
<span id="cb634-2"><a href="programming-concepts.html#cb634-2"></a></span>
<span id="cb634-3"><a href="programming-concepts.html#cb634-3"></a>df_hombres_filtrado &lt;-<span class="st"> </span>df_hombres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb634-4"><a href="programming-concepts.html#cb634-4"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>annos_seleccionados)</span>
<span id="cb634-5"><a href="programming-concepts.html#cb634-5"></a></span>
<span id="cb634-6"><a href="programming-concepts.html#cb634-6"></a>df_mujeres_filtrado &lt;-<span class="st"> </span>df_mujeres <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb634-7"><a href="programming-concepts.html#cb634-7"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span>annos_seleccionados)</span>
<span id="cb634-8"><a href="programming-concepts.html#cb634-8"></a></span>
<span id="cb634-9"><a href="programming-concepts.html#cb634-9"></a>df_para_grafico &lt;-<span class="st"> </span>df_hombres_filtrado <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb634-10"><a href="programming-concepts.html#cb634-10"></a><span class="st">  </span><span class="kw">full_join</span>(df_mujeres_filtrado)</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;provincia&quot;, &quot;year&quot;)</code></pre>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="programming-concepts.html#cb636-1"></a>df_para_grafico &lt;-<span class="st"> </span>df_para_grafico <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb636-2"><a href="programming-concepts.html#cb636-2"></a><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb636-3"><a href="programming-concepts.html#cb636-3"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb636-4"><a href="programming-concepts.html#cb636-4"></a>    <span class="dt">hombres =</span> <span class="kw">sum</span>(hombres, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb636-5"><a href="programming-concepts.html#cb636-5"></a>    <span class="dt">mujeres =</span> <span class="kw">sum</span>(mujeres, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb636-6"><a href="programming-concepts.html#cb636-6"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="programming-concepts.html#cb638-1"></a><span class="kw">ggplot</span>(df_para_grafico) <span class="op">+</span><span class="st"> </span></span>
<span id="cb638-2"><a href="programming-concepts.html#cb638-2"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> hombres), <span class="dt">col =</span> <span class="st">&quot;purple&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb638-3"><a href="programming-concepts.html#cb638-3"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> mujeres), <span class="dt">col =</span> <span class="st">&quot;yellow4&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-328-1.png" width="672" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Plot the same evolution but for the entire population.</li>
</ol>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="programming-concepts.html#cb639-1"></a>df_para_grafico <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb639-2"><a href="programming-concepts.html#cb639-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">total =</span> hombres <span class="op">+</span><span class="st"> </span>mujeres) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb639-3"><a href="programming-concepts.html#cb639-3"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb639-4"><a href="programming-concepts.html#cb639-4"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> total), <span class="dt">col =</span> <span class="st">&quot;purple&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-329-1.png" width="672" /></p>
</div>
<div id="applying-the-same-function-to-several-elements-i" class="section level2" number="5.10">
<h2><span class="header-section-number">5.10</span> Applying the same function to several elements (I)</h2>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="programming-concepts.html#cb640-1"></a><span class="kw">library</span>(readr)</span>
<span id="cb640-2"><a href="programming-concepts.html#cb640-2"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="programming-concepts.html#cb641-1"></a>df_terraces_sample &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/ejemplo1_map.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>())</span></code></pre></div>
<p>Which is the class of each column?</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="programming-concepts.html#cb642-1"></a><span class="kw">class</span>(df_terraces_sample<span class="op">$</span>id_terraza)</span>
<span id="cb642-2"><a href="programming-concepts.html#cb642-2"></a><span class="kw">class</span>(df_terraces_sample<span class="op">$</span>id_local)</span>
<span id="cb642-3"><a href="programming-concepts.html#cb642-3"></a><span class="kw">class</span>(df_terraces_sample<span class="op">$</span>id_distrito_local)</span></code></pre></div>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="programming-concepts.html#cb643-1"></a><span class="kw">library</span>(purrr)</span>
<span id="cb643-2"><a href="programming-concepts.html#cb643-2"></a>listado_clases &lt;-<span class="st"> </span><span class="kw">map</span>(df_terraces_sample, class)</span>
<span id="cb643-3"><a href="programming-concepts.html#cb643-3"></a></span>
<span id="cb643-4"><a href="programming-concepts.html#cb643-4"></a>listado_clases[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## $id_terraza
## [1] &quot;numeric&quot;
## 
## $id_local
## [1] &quot;numeric&quot;
## 
## $id_distrito_local
## [1] &quot;numeric&quot;
## 
## $desc_distrito_local
## [1] &quot;character&quot;
## 
## $id_barrio_local
## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="programming-concepts.html#cb645-1"></a><span class="kw">class</span>(listado_clases)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
</div>
<div id="lists" class="section level2" number="5.11">
<h2><span class="header-section-number">5.11</span> Lists</h2>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="programming-concepts.html#cb647-1"></a>un_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">3</span>)</span>
<span id="cb647-2"><a href="programming-concepts.html#cb647-2"></a>un_vector</span></code></pre></div>
<pre><code>## [1] 1 5 8 3</code></pre>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="programming-concepts.html#cb649-1"></a>una_lista &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">3</span>)</span>
<span id="cb649-2"><a href="programming-concepts.html#cb649-2"></a>una_lista</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] 5
## 
## [[3]]
## [1] 8
## 
## [[4]]
## [1] 3</code></pre>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="programming-concepts.html#cb651-1"></a>un_vector[<span class="dv">1</span>] <span class="op">==</span><span class="st"> </span>una_lista[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="programming-concepts.html#cb653-1"></a>otra_lista &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">3</span>))</span>
<span id="cb653-2"><a href="programming-concepts.html#cb653-2"></a>otra_lista</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 5 8 3</code></pre>
<div class="sourceCode" id="cb655"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb655-1"><a href="programming-concepts.html#cb655-1"></a><span class="kw">length</span>(una_lista)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="programming-concepts.html#cb657-1"></a><span class="kw">length</span>(otra_lista)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="programming-concepts.html#cb659-1"></a><span class="kw">c</span>(<span class="dv">1</span>, <span class="st">&quot;dos&quot;</span>, <span class="dv">3</span>, <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb660"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb660-1"><a href="programming-concepts.html#cb660-1"></a><span class="kw">list</span>(<span class="dv">1</span>, <span class="st">&quot;dos&quot;</span>, <span class="dv">3</span>, <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] &quot;dos&quot;
## 
## [[3]]
## [1] 3
## 
## [[4]]
## [1] TRUE</code></pre>
<p>A list of data frames</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="programming-concepts.html#cb662-1"></a>lista_dataframes1 &lt;-<span class="st"> </span><span class="kw">list</span>(iris, mtcars)</span>
<span id="cb662-2"><a href="programming-concepts.html#cb662-2"></a></span>
<span id="cb662-3"><a href="programming-concepts.html#cb662-3"></a><span class="kw">head</span>(lista_dataframes1[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="programming-concepts.html#cb664-1"></a><span class="kw">head</span>(lista_dataframes1[[<span class="dv">2</span>]])</span></code></pre></div>
<pre><code>##    mpg cyl disp  hp drat    wt  qsec vs am gear carb cyl_am
## 1 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4    6_1
## 2 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4    6_1
## 3 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1    4_1
## 4 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1    6_0
## 5 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2    8_0
## 6 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1    6_0</code></pre>
<div class="sourceCode" id="cb666"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb666-1"><a href="programming-concepts.html#cb666-1"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb666-2"><a href="programming-concepts.html#cb666-2"></a>P &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Length, <span class="dt">y =</span> Sepal.Width)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb666-3"><a href="programming-concepts.html#cb666-3"></a><span class="st">  </span><span class="kw">geom_point</span>()</span>
<span id="cb666-4"><a href="programming-concepts.html#cb666-4"></a></span>
<span id="cb666-5"><a href="programming-concepts.html#cb666-5"></a>lista_variada1 &lt;-<span class="st"> </span><span class="kw">list</span>(iris, P)</span>
<span id="cb666-6"><a href="programming-concepts.html#cb666-6"></a></span>
<span id="cb666-7"><a href="programming-concepts.html#cb666-7"></a><span class="kw">head</span>(lista_variada1[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="programming-concepts.html#cb668-1"></a>lista_variada1[[<span class="dv">2</span>]]</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-344-1.png" width="672" /></p>
</div>
<div id="applying-the-same-function-to-several-elements-ii" class="section level2" number="5.12">
<h2><span class="header-section-number">5.12</span> Applying the same function to several elements (II)</h2>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="programming-concepts.html#cb669-1"></a>df_co_<span class="dv">2017</span> &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/CO_2017.csv&quot;</span>, <span class="dt">col_type =</span> <span class="kw">cols</span>())</span>
<span id="cb669-2"><a href="programming-concepts.html#cb669-2"></a>df_co_<span class="dv">2018</span> &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/CO_2018.csv&quot;</span>, <span class="dt">col_type =</span> <span class="kw">cols</span>())</span>
<span id="cb669-3"><a href="programming-concepts.html#cb669-3"></a>df_co_<span class="dv">2019</span> &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/CO_2019.csv&quot;</span>, <span class="dt">col_type =</span> <span class="kw">cols</span>())</span></code></pre></div>
<p>They have same structure so we can read them all on the fly and get a list with the three of them.</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="programming-concepts.html#cb670-1"></a><span class="co"># There are better ways of getting the files&#39; names</span></span>
<span id="cb670-2"><a href="programming-concepts.html#cb670-2"></a>files_with_data &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;data/CO_2017.csv&quot;</span>, <span class="st">&quot;data/CO_2018.csv&quot;</span>, <span class="st">&quot;data/CO_2019.csv&quot;</span>)</span>
<span id="cb670-3"><a href="programming-concepts.html#cb670-3"></a></span>
<span id="cb670-4"><a href="programming-concepts.html#cb670-4"></a>files_with_data</span></code></pre></div>
<pre><code>## [1] &quot;data/CO_2017.csv&quot; &quot;data/CO_2018.csv&quot; &quot;data/CO_2019.csv&quot;</code></pre>
<p>What we want to do is applying <code>read_csv()</code> to each element in that vector. These elements are the files’ paths we want to read. So we apply (or map) the <code>read_csv()</code> function to these paths.</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="programming-concepts.html#cb672-1"></a>listado_dataframes &lt;-<span class="st"> </span><span class="kw">map</span>(files_with_data, read_csv)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   estacion = col_double(),
##   magnitud = col_double(),
##   ano = col_double(),
##   mes = col_character(),
##   dia = col_character(),
##   dato_co = col_double()
## )
## Parsed with column specification:
## cols(
##   estacion = col_double(),
##   magnitud = col_double(),
##   ano = col_double(),
##   mes = col_character(),
##   dia = col_character(),
##   dato_co = col_double()
## )
## Parsed with column specification:
## cols(
##   estacion = col_double(),
##   magnitud = col_double(),
##   ano = col_double(),
##   mes = col_character(),
##   dia = col_character(),
##   dato_co = col_double()
## )</code></pre>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="programming-concepts.html#cb674-1"></a><span class="kw">class</span>(listado_dataframes)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>Each element on the list is a data frame, so we can map the common functions we know for data frames to these data frames. Again, with map:</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="programming-concepts.html#cb676-1"></a><span class="kw">map</span>(listado_dataframes, names)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;estacion&quot; &quot;magnitud&quot; &quot;ano&quot;      &quot;mes&quot;      &quot;dia&quot;      &quot;dato_co&quot; 
## 
## [[2]]
## [1] &quot;estacion&quot; &quot;magnitud&quot; &quot;ano&quot;      &quot;mes&quot;      &quot;dia&quot;      &quot;dato_co&quot; 
## 
## [[3]]
## [1] &quot;estacion&quot; &quot;magnitud&quot; &quot;ano&quot;      &quot;mes&quot;      &quot;dia&quot;      &quot;dato_co&quot;</code></pre>
<p>But we have a list of data frames and we prefer one only data frame gathering all the data. We did this on a previous session with <code>dplyr::bind_rows()</code>. So our next goal is <em>reducing</em> the list into one data frame. We can do this with <code>purrr::reduce()</code>. <strong>Mind the lower case.</strong> With capital <em>R</em> is a similar but different function.</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="programming-concepts.html#cb678-1"></a>df_co_unico &lt;-<span class="st"> </span><span class="kw">reduce</span>(listado_dataframes, bind_rows)</span>
<span id="cb678-2"><a href="programming-concepts.html#cb678-2"></a><span class="kw">class</span>(df_co_unico)</span></code></pre></div>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="programming-concepts.html#cb680-1"></a><span class="kw">map</span>(listado_dataframes, dim)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 3720    6
## 
## [[2]]
## [1] 3720    6
## 
## [[3]]
## [1] 2790    6</code></pre>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="programming-concepts.html#cb682-1"></a><span class="kw">dim</span>(df_co_unico)</span></code></pre></div>
<pre><code>## [1] 10230     6</code></pre>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="programming-concepts.html#cb684-1"></a>df_unico_directo &lt;-<span class="st"> </span><span class="kw">map_df</span>(files_with_data, read_csv)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   estacion = col_double(),
##   magnitud = col_double(),
##   ano = col_double(),
##   mes = col_character(),
##   dia = col_character(),
##   dato_co = col_double()
## )
## Parsed with column specification:
## cols(
##   estacion = col_double(),
##   magnitud = col_double(),
##   ano = col_double(),
##   mes = col_character(),
##   dia = col_character(),
##   dato_co = col_double()
## )
## Parsed with column specification:
## cols(
##   estacion = col_double(),
##   magnitud = col_double(),
##   ano = col_double(),
##   mes = col_character(),
##   dia = col_character(),
##   dato_co = col_double()
## )</code></pre>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="programming-concepts.html#cb686-1"></a><span class="kw">dim</span>(df_unico_directo)</span></code></pre></div>
<pre><code>## [1] 10230     6</code></pre>
<p>You can also pass parameters to the function you map through the map function.</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="programming-concepts.html#cb688-1"></a>df_unico_directo &lt;-<span class="st"> </span><span class="kw">map_df</span>(files_with_data, read_csv, <span class="dt">col_types =</span> <span class="kw">cols</span>())</span>
<span id="cb688-2"><a href="programming-concepts.html#cb688-2"></a><span class="kw">head</span>(df_unico_directo)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   estacion magnitud   ano mes   dia   dato_co
##      &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1        4        6  2017 01    d01       0.5
## 2        4        6  2017 01    d02       0.5
## 3        4        6  2017 01    d03       0.7
## 4        4        6  2017 01    d04       0.7
## 5        4        6  2017 01    d05       0.6
## 6        4        6  2017 01    d06       0.6</code></pre>
</div>
<div id="exercise-5" class="section level2" number="5.13">
<h2><span class="header-section-number">5.13</span> Exercise</h2>
<ol style="list-style-type: decimal">
<li>In this case <code>map_df()</code> works fine but it won’t always be that easy. Create a list with <code>map()</code> reading <code>"CO_2017.csv"</code> and <code>"NO_2017.csv"</code>. Now join the two data frames into one only. <em>Hint.</em> We already saw how to use the family of functions <code>*_join()</code>. Decide which join function you should use and apply with the <code>reduce()</code>, as example shown below.</li>
</ol>
<hr />
<p><strong>Master in DS</strong>
Introduction to programming</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualization.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
